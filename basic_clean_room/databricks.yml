# This is a Databricks asset bundle definition for basic_clean_room.
# See https://docs.databricks.com/dev-tools/bundles/index.html for documentation.
bundle:
  name: basic_clean_room
  uuid: ed8d3f59-9a92-4a96-a1fb-a8e3f8f6a0fe

include:
  - resources/*.yml
  - resources/*/*.yml

# Variable declarations. These variables are assigned in the dev/prod targets below.
variables:
  catalog:
    description: The catalog to use
  schema:
    description: The schema to use
    default: clean_room_sample_data
  run_as_user:
    description: The user or service principal for which the workflows and pipelines should be run as. 
  style: 
    description: "Which type of clean room tasks should be run-- values are: [creator, collaborator]"
    default: collaborator

targets:
  # this target may be altered to run in development mode, otherwise its primarily for matthew.giglia@databricks.com's updates.  To run the demo yourself, the recommendation is to use the creator or collab targets depending if you are the creator of the clean room, or an invited collaborator.  
  dev:
    mode: development
    default: true
    workspace:
      host: https://fe-vm-mkgs-databricks-demos.cloud.databricks.com/
    variables:
      catalog: mkgs_dev
      schema: clean_room_sample_data
      run_as_user: matthew.giglia@databricks.com
      style: creator

# update the details for the creator or collab workspace as required for your workspace, catalog, schema and run_as_user 

  creator: 
    # the primary use of this target is to run the job that will create the clean room using the Databricks Python SDK.  Must have "create clean" permission for the run as user to execute.  
    mode: production
    default: false
    workspace:
      host: https://fe-vm-mkgs-databricks-demos.cloud.databricks.com/
    variables:
      catalog: mkgs
      schema: clean_room_sample_data
      run_as_user: 47c0365e-b1af-429c-b56d-07cfb18b5dc7
      style: creator

  collab: 
    mode: production
    default: false
    workspace:
      host: https://fe-vm-mkgs-databricks-demos.cloud.databricks.com/
    variables:
      catalog: mkgs
      schema: clean_room_sample_data
      run_as_user: 47c0365e-b1af-429c-b56d-07cfb18b5dc7
      style: collaborator

